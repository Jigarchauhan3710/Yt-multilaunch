<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="referrer" content="strict-origin-when-cross-origin">
<meta name="theme-color" content="#FF0000">
<title>YT MultiLaunch</title>
<style>
:root{--r:#FF0000;--r2:#CC0000;--r3:#990000;--off:#F9F9F9;--lg:#E5E5E5;--mg:#999;--dg:#282828;--tx:#0F0F0F;}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
body{font-family:-apple-system,Roboto,Arial,sans-serif;background:var(--off);color:var(--tx);min-height:100vh;}

header{background:#fff;border-bottom:1px solid var(--lg);padding:12px 16px;display:flex;align-items:center;gap:10px;position:sticky;top:0;z-index:100;box-shadow:0 1px 6px rgba(0,0,0,0.08);}
.logo{width:36px;height:26px;background:var(--r);border-radius:7px;display:flex;align-items:center;justify-content:center;flex-shrink:0;}
.logo svg{width:15px;height:15px;fill:#fff;}
.ltxt{font-size:17px;font-weight:700;}.ltxt b{color:var(--r);}
.badge{margin-left:auto;background:var(--r);color:#fff;font-size:10px;font-weight:700;padding:3px 8px;border-radius:20px;}

.hero{background:linear-gradient(135deg,var(--r),var(--r3));padding:32px 16px 52px;text-align:center;position:relative;overflow:hidden;}
.hero::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(45deg,rgba(255,255,255,0.03) 0,rgba(255,255,255,0.03) 1px,transparent 0,transparent 50%) 0 0/16px 16px;}
.hero h1{font-size:clamp(20px,5vw,34px);font-weight:800;color:#fff;margin-bottom:8px;position:relative;line-height:1.2;}
.hero p{color:rgba(255,255,255,0.8);font-size:14px;position:relative;}

.card{background:#fff;border-radius:16px;box-shadow:0 4px 24px rgba(0,0,0,0.1);padding:22px 18px;max-width:600px;width:calc(100% - 24px);margin:-30px auto 20px;position:relative;z-index:10;}
.step{margin-bottom:20px;}
.sl{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--r);margin-bottom:7px;display:flex;align-items:center;gap:5px;}
.sn{background:var(--r);color:#fff;width:16px;height:16px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:9px;}

.irow{display:flex;}
.irow input{flex:1;border:2px solid var(--lg);border-radius:10px 0 0 10px;padding:13px 12px;font-size:14px;font-family:inherit;color:var(--tx);outline:none;background:var(--off);min-width:0;transition:border-color 0.2s;}
.irow input:focus{border-color:var(--r);background:#fff;}
.irow input::placeholder{color:var(--mg);}
.pbtn{background:var(--lg);border:2px solid var(--lg);border-left:none;border-radius:0 10px 10px 0;padding:0 12px;font-size:12px;font-weight:700;color:var(--dg);cursor:pointer;white-space:nowrap;}
.pbtn:active{background:#ccc;}

#prev{display:none;margin-top:10px;border-radius:10px;overflow:hidden;border:1px solid var(--lg);cursor:pointer;position:relative;}
#thumb{width:100%;aspect-ratio:16/9;display:block;object-fit:cover;background:#000;}
.play-btn{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:52px;height:52px;background:rgba(255,0,0,0.9);border-radius:50%;display:flex;align-items:center;justify-content:center;}
.play-btn svg{width:20px;height:20px;fill:#fff;margin-left:3px;}
#prev-lbl{padding:7px 12px;font-size:11px;color:var(--dg);font-weight:600;background:#fff;}
.warn{background:#fff0f0;border:1.5px solid #fcc;border-radius:8px;padding:9px 12px;font-size:12px;color:#900;margin-top:7px;display:none;}

.crow{display:flex;align-items:center;gap:10px;}
.cbtn{width:40px;height:40px;border-radius:50%;border:2px solid var(--lg);background:#fff;font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--dg);flex-shrink:0;user-select:none;}
.cbtn:active{border-color:var(--r);color:var(--r);}
#ci{flex:1;border:2px solid var(--lg);border-radius:10px;padding:10px;font-size:22px;font-weight:700;text-align:center;color:var(--tx);outline:none;font-family:inherit;max-width:100px;}
#ci:focus{border-color:var(--r);}
.pres{display:flex;gap:6px;flex-wrap:wrap;margin-top:9px;}
.pre{padding:5px 12px;border-radius:20px;border:1.5px solid var(--lg);background:#fff;font-size:12px;font-weight:700;cursor:pointer;color:var(--dg);}
.pre:active,.pre.on{background:var(--r);border-color:var(--r);color:#fff;}

.mrow{display:flex;gap:8px;}
.mo{flex:1;border:2px solid var(--lg);border-radius:10px;padding:11px 8px;cursor:pointer;text-align:center;user-select:none;transition:border-color 0.15s;}
.mo.sel{border-color:var(--r);background:rgba(255,0,0,0.04);}
.mo input{display:none;}
.mi{font-size:20px;display:block;margin-bottom:2px;}.mn{font-size:12px;font-weight:700;}.md{font-size:10px;color:var(--mg);margin-top:1px;}

.box{border-radius:10px;padding:11px 14px;font-size:12px;line-height:1.6;margin-top:10px;}
.box-g{background:#e8f5e9;border:1.5px solid #81c784;color:#1b5e20;}
.box-y{background:#fff8e1;border:1.5px solid #ffe082;color:#5d4037;}
.box-o{background:#fff3e0;border:1.5px solid #ffb74d;color:#e65100;}

.lbtn{width:100%;padding:15px;background:var(--r);color:#fff;border:none;border-radius:12px;font-size:16px;font-weight:700;font-family:inherit;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:12px;transition:background 0.15s;}
.lbtn:active{background:var(--r2);}
.lbtn:disabled{background:#ccc;cursor:not-allowed;}
.lbtn svg{width:18px;height:18px;fill:#fff;}

/* RESULT SECTION */
#result-sec{display:none;max-width:600px;width:calc(100% - 24px);margin:0 auto 20px;}
.res-card{background:#fff;border-radius:16px;padding:20px 18px;box-shadow:0 2px 14px rgba(0,0,0,0.08);}
.res-top{display:flex;align-items:center;gap:12px;margin-bottom:14px;}
.res-icon{font-size:32px;}
.res-title{font-size:15px;font-weight:700;}
.res-sub{font-size:12px;color:var(--mg);margin-top:2px;}
.pb{background:var(--lg);border-radius:100px;height:8px;overflow:hidden;margin-bottom:8px;}
.pf{height:100%;background:linear-gradient(90deg,var(--r),#ff6b6b);border-radius:100px;transition:width 0.4s;}
.pm{display:flex;justify-content:space-between;font-size:11px;color:var(--mg);margin-bottom:14px;}
/* ALLOW POPUP GUIDE */
#allow-guide{display:none;background:#fff8e1;border:1.5px solid #ffe082;border-radius:12px;padding:14px 16px;font-size:12px;color:#5d4037;line-height:1.8;margin-top:12px;}
#allow-guide b{color:#333;}
#allow-guide .step-row{display:flex;align-items:flex-start;gap:8px;margin-bottom:4px;}
#allow-guide .num{background:var(--r);color:#fff;width:18px;height:18px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;flex-shrink:0;margin-top:1px;}
.retry-btn{width:100%;padding:13px;background:var(--r);color:#fff;border:none;border-radius:12px;font-size:14px;font-weight:700;cursor:pointer;font-family:inherit;margin-top:12px;display:flex;align-items:center;justify-content:center;gap:6px;}
.retry-btn:active{background:var(--r2);}

/* FRAMES */
#fr-sec{display:none;max-width:600px;width:calc(100% - 24px);margin:0 auto 24px;}
.fb{display:flex;justify-content:space-between;align-items:center;margin-bottom:9px;}
.ft{font-size:13px;font-weight:700;}
.clr{background:none;border:1.5px solid var(--lg);border-radius:8px;padding:5px 11px;font-size:12px;font-weight:600;cursor:pointer;color:var(--dg);}
.fg{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:9px;}
.fi{background:#000;border-radius:10px;overflow:hidden;animation:fi 0.3s ease;box-shadow:0 2px 10px rgba(0,0,0,0.15);}
.fi iframe{width:100%;aspect-ratio:16/9;display:block;border:none;}
.fl{background:var(--dg);color:#fff;font-size:11px;font-weight:600;padding:5px 9px;display:flex;align-items:center;gap:5px;}
.fd{width:6px;height:6px;background:var(--r);border-radius:50%;animation:pulse 1.5s infinite;}

/* PROGRESS for inline */
#prog-sec{display:none;max-width:600px;width:calc(100% - 24px);margin:0 auto 20px;}
.pc{background:#fff;border-radius:16px;padding:20px;box-shadow:0 2px 14px rgba(0,0,0,0.08);}
.pt{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;}
#pc2{font-size:24px;font-weight:700;color:var(--r);}
#sbtn{background:#fff;border:2px solid var(--r);color:var(--r);border-radius:8px;padding:8px 16px;font-size:13px;font-weight:700;cursor:pointer;font-family:inherit;margin-top:12px;}

.div{height:1px;background:var(--lg);max-width:600px;width:calc(100% - 24px);margin:0 auto 14px;}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.3}}
@keyframes fi{from{opacity:0;transform:scale(0.94)}to{opacity:1;transform:scale(1)}}
footer{text-align:center;padding:24px 16px;font-size:11px;color:var(--mg);}
</style>
</head>
<body>

<header>
  <div class="logo"><svg viewBox="0 0 24 24"><path d="M9.5 16.5v-9l7 4.5-7 4.5z"/></svg></div>
  <span class="ltxt">YT <b>Multi</b>Launch</span>
  <span class="badge">v5 UNIQUE</span>
</header>

<div class="hero">
  <h1>ğŸš€ One Video.<br>Unlimited Tabs.</h1>
  <p>Paste YouTube link Â· Set count Â· Launch all at once</p>
</div>

<div class="card">

  <div class="step">
    <div class="sl"><span class="sn">1</span> Paste YouTube URL</div>
    <div class="irow">
      <input type="url" id="url-in" placeholder="https://youtube.com/watch?v=..." inputmode="url" autocomplete="off" spellcheck="false">
      <button class="pbtn" onclick="doPaste()">ğŸ“‹ Paste</button>
    </div>
    <div id="prev" onclick="openVid()">
      <img id="thumb" src="" alt="Video thumbnail">
      <div class="play-btn"><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
      <div id="prev-lbl">âœ… Video found â€” tap to preview Â· Set count below</div>
    </div>
    <div class="warn" id="uw">âš ï¸ Please enter a valid YouTube URL</div>
  </div>

  <div class="step">
    <div class="sl"><span class="sn">2</span> How many tabs / screens?</div>
    <div class="crow">
      <button class="cbtn" onclick="adj(-1)">âˆ’</button>
      <input type="number" id="ci" value="5" min="1" max="100">
      <button class="cbtn" onclick="adj(1)">+</button>
    </div>
    <div class="pres">
      <button class="pre" onclick="sp(this,2)">2</button>
      <button class="pre" onclick="sp(this,5)">5</button>
      <button class="pre" onclick="sp(this,10)">10</button>
      <button class="pre" onclick="sp(this,25)">25</button>
      <button class="pre" onclick="sp(this,50)">50</button>
    </div>
  </div>

  <div class="step">
    <div class="sl"><span class="sn">3</span> Mode</div>
    <div class="mrow">
      <label class="mo sel" id="m1">
        <input type="radio" name="mode" value="tabs" checked onchange="sm(this)">
        <span class="mi">ğŸ—‚ï¸</span><div class="mn">New Tabs</div><div class="md">Open in Chrome tabs</div>
      </label>
      <label class="mo" id="m2">
        <input type="radio" name="mode" value="inline" onchange="sm(this)">
        <span class="mi">ğŸ“±</span><div class="mn">Same Screen</div><div class="md">All videos here</div>
      </label>
    </div>
    <div class="box box-g" id="tip-tabs" style="display:block">
      ğŸ—‚ï¸ <b>New Tabs:</b> Each tab opens with a <b>unique session ID</b> â€” YouTube sees every tab as a different device/user! If Chrome blocks popups first time, a guide will appear â€” you only do this <b>once</b>.
    </div>
    <div class="box box-g" id="tip-inline" style="display:none">
      ğŸ“± <b>Same Screen:</b> Each embedded video gets a <b>unique session token</b> so YouTube treats every frame as a new device. No popup permissions needed!
    </div>
  </div>

  <button class="lbtn" id="lb" onclick="launch()">
    <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
    Launch All Videos
  </button>
</div>

<!-- RESULT SECTION (tabs mode) -->
<div id="result-sec">
  <div class="res-card">
    <div class="res-top">
      <div class="res-icon" id="res-icon">ğŸš€</div>
      <div>
        <div class="res-title" id="res-title">Opening tabs...</div>
        <div class="res-sub" id="res-sub">Please wait</div>
      </div>
    </div>
    <div class="pb"><div class="pf" id="res-bar"></div></div>
    <div class="pm"><span id="res-opened">0 opened</span><span id="res-total">of 0</span></div>

    <!-- Shows only when Chrome blocked popups -->
    <div id="allow-guide">
      <b>âš ï¸ Chrome blocked the popups â€” here's how to allow them in 3 seconds:</b><br><br>
      <div class="step-row"><span class="num">1</span><span>Look at the <b>address bar</b> (top of Chrome) â€” you'll see a small <b>ğŸš« blocked popup icon</b> on the right side</span></div>
      <div class="step-row"><span class="num">2</span><span>Click that icon â†’ select <b>"Always allow popups from this site"</span></div>
      <div class="step-row"><span class="num">3</span><span>Click <b>Done</b></span></div>
      <div class="step-row"><span class="num">4</span><span>Click the button below â€” <b>all tabs will open instantly</b> this time! âœ…</span></div>
      <button class="retry-btn" onclick="retryLaunch()">ğŸ”„ Try Again â€” Open All Tabs Now</button>
    </div>
  </div>
</div>

<!-- INLINE PROGRESS -->
<div id="prog-sec">
  <div class="pc">
    <div class="pt">
      <div>
        <div style="font-weight:700;font-size:14px">ğŸ“º Embedding videos...</div>
        <div style="font-size:11px;color:var(--mg);margin-top:2px" id="psub">Please wait</div>
      </div>
      <div id="pc2">0</div>
    </div>
    <div class="pb"><div class="pf" id="pb2"></div></div>
    <div class="pm" style="margin-bottom:4px"><span id="pd">0 done</span><span id="pt2">of 0</span></div>
    <button id="sbtn" onclick="doStop()">â¹ Stop</button>
  </div>
</div>

<!-- FRAMES GRID -->
<div id="fr-sec">
  <div class="div"></div>
  <div style="max-width:600px;width:calc(100% - 24px);margin:0 auto 9px">
    <div class="fb">
      <div class="ft">ğŸ“º <span id="fc">0</span> Videos Running</div>
      <button class="clr" onclick="clrF()">âœ• Clear All</button>
    </div>
  </div>
  <div class="fg" id="fg"></div>
</div>

<footer>YT MultiLaunch v4 Â· Upload to GitHub Pages for best results Â· Not affiliated with YouTube</footer>

<script>
const isMob = /Mobi|Android|iPhone|iPad/i.test(navigator.userAgent);
let sf = false, inlineTimer = null, curV = '', lastVid = '', lastCount = 0;

function g(id){ return document.getElementById(id); }

// â”€â”€ MODE TOGGLE â”€â”€
function sm(r){
  document.querySelectorAll('.mo').forEach(e=>e.classList.remove('sel'));
  r.closest('.mo').classList.add('sel');
  const isTab = r.value === 'tabs';
  g('tip-tabs').style.display = isTab ? 'block' : 'none';
  g('tip-inline').style.display = isTab ? 'none' : 'block';
}

// â”€â”€ PASTE â”€â”€
async function doPaste(){
  try{ const t = await navigator.clipboard.readText(); g('url-in').value = t; hurl(t); }
  catch(e){ g('url-in').focus(); }
}
g('url-in').addEventListener('input', e => hurl(e.target.value));
g('url-in').addEventListener('paste', e => setTimeout(()=>hurl(e.target.value), 50));

function hurl(v){
  const vid = gvid(v.trim());
  g('uw').style.display = 'none';
  if(vid){
    curV = vid;
    g('thumb').src = `https://img.youtube.com/vi/${vid}/hqdefault.jpg`;
    g('prev').style.display = 'block';
  } else {
    g('prev').style.display = 'none'; curV = '';
    if(v.length > 8) g('uw').style.display = 'block';
  }
}
function openVid(){ if(curV) window.open(`https://www.youtube.com/watch?v=${curV}`, '_blank'); }

function gvid(u){
  if(!u) return null; let m;
  if((m=u.match(/youtu\.be\/([a-zA-Z0-9_-]{11})/))) return m[1];
  if((m=u.match(/[?&]v=([a-zA-Z0-9_-]{11})/))) return m[1];
  if((m=u.match(/embed\/([a-zA-Z0-9_-]{11})/))) return m[1];
  if((m=u.match(/shorts\/([a-zA-Z0-9_-]{11})/))) return m[1];
  return null;
}

// â”€â”€ COUNT â”€â”€
function adj(d){ const i=g('ci'); i.value=Math.max(1,Math.min(100,(parseInt(i.value)||1)+d)); sync(); }
g('ci').addEventListener('input', sync);
function sp(b,v){ g('ci').value=v; sync(); }
function sync(){ const v=parseInt(g('ci').value); document.querySelectorAll('.pre').forEach(p=>p.classList.toggle('on',parseInt(p.textContent)===v)); }

// â”€â”€ LAUNCH â”€â”€
function launch(){
  const url = g('url-in').value.trim(), vid = gvid(url);
  if(!vid){ g('uw').style.display='block'; return; }
  const count = Math.max(1, Math.min(100, parseInt(g('ci').value)||5));
  const mode = document.querySelector('input[name="mode"]:checked').value;
  lastVid = vid; lastCount = count;
  if(mode === 'tabs') openAllTabs(vid, count);
  else inlineMode(vid, count);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UNIQUE DEVICE PER TAB / IFRAME
// Each tab or embed gets a unique session identity so YouTube
// treats every instance as a brand-new user/device:
//   â€¢ Unique &t= timestamp offset (cache buster)
//   â€¢ Unique &sessionId= random token
//   â€¢ Unique &index= so every URL is different (no session sharing)
//   â€¢ For inline embeds: unique widget_referrer + origin token
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Generate a random alphanumeric token of given length
function randToken(len){
  const chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
  let s='';
  for(let i=0;i<len;i++) s+=chars[Math.floor(Math.random()*chars.length)];
  return s;
}

// Build a unique YouTube watch URL for each tab
function uniqueTabUrl(vid, index){
  const session = randToken(16);
  const ts = Date.now() + index * 37; // staggered timestamp per tab
  // Each URL is unique â†’ Chrome/YouTube treats it as a fresh session
  return `https://www.youtube.com/watch?v=${vid}&t=${ts}&si=${session}&idx=${index}`;
}

// Build a unique embed src for each iframe
function uniqueEmbedSrc(vid, index){
  const session = randToken(20);
  const ts = Date.now() + index * 41;
  const fakeOrigin = `https://app-${randToken(8)}.example.com`;
  const origin = encodeURIComponent(location.origin || fakeOrigin);
  // Each iframe gets unique query params â†’ separate YouTube session
  return `https://www.youtube.com/embed/${vid}?autoplay=1&mute=1&rel=0&loop=1&playlist=${vid}&playsinline=1&enablejsapi=1&origin=${origin}&widget_referrer=${encodeURIComponent('https://ref-'+session+'.local')}&t=${ts}&sid=${session}&_idx=${index}`;
}

function openAllTabs(vid, count){
  const sec = g('result-sec');
  sec.style.display = 'block';
  sec.scrollIntoView({behavior:'smooth', block:'start'});
  g('allow-guide').style.display = 'none';
  g('res-icon').textContent = 'ğŸš€';
  g('res-title').textContent = `Opening ${count} tabs...`;
  g('res-sub').textContent = 'Each tab = unique device session!';
  g('res-total').textContent = `of ${count}`;
  g('res-bar').style.width = '0%';
  g('res-opened').textContent = '0 opened';

  // Step 1: Open ALL blank windows immediately inside click event
  // Chrome allows multiple about:blank opens from one click
  const windows = [];
  for(let i = 0; i < count; i++){
    const w = window.open('about:blank', '_blank');
    if(w) windows.push(w);
  }

  // Step 2: Redirect each opened blank window to a UNIQUE YouTube URL
  // so every tab appears as a different user/device
  let opened = 0;
  windows.forEach((w, i) => {
    setTimeout(() => {
      try {
        const url = uniqueTabUrl(vid, i); // â† unique per tab
        w.location.href = url;
        opened++;
        const pct = Math.round(opened / count * 100);
        g('res-bar').style.width = pct + '%';
        g('res-opened').textContent = opened + ' opened';
        if(opened === count){
          g('res-icon').textContent = 'âœ…';
          g('res-title').textContent = `All ${count} tabs opened!`;
          g('res-sub').textContent = `Each tab has a unique device session ğŸ¯`;
          g('lb').disabled = false;
        }
      } catch(e){}
    }, i * 80); // small stagger so browser doesn't freeze
  });

  // If Chrome blocked them (windows array is empty or short)
  if(windows.length === 0){
    showBlockedGuide(count);
  } else if(windows.length < count){
    // Some were blocked
    setTimeout(()=>{
      g('res-icon').textContent = 'âš ï¸';
      g('res-title').textContent = `${windows.length} of ${count} tabs opened`;
      g('res-sub').textContent = 'Chrome blocked some â€” see guide below';
      showBlockedGuide(count);
    }, 500);
  } else {
    g('lb').disabled = true;
  }
}

function showBlockedGuide(count){
  g('allow-guide').style.display = 'block';
  g('lb').disabled = false;
}

function retryLaunch(){
  if(lastVid) openAllTabs(lastVid, lastCount);
}

// â”€â”€ INLINE EMBED MODE â”€â”€
function inlineMode(vid, count){
  sf = false;
  const fs = g('fr-sec'), fg = g('fg');
  const ps = g('prog-sec');
  ps.style.display = 'block';
  ps.scrollIntoView({behavior:'smooth', block:'start'});
  fs.style.display = 'block';
  fg.innerHTML = '';
  g('pt2').textContent = `of ${count}`;
  g('pc2').textContent = '0';
  g('pb2').style.width = '0%';
  g('pd').textContent = '0 done';
  g('lb').disabled = true;

  const allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';

  let n = 0;
  inlineTimer = setInterval(()=>{
    if(sf || n >= count){
      clearInterval(inlineTimer);
      g('lb').disabled = false;
      g('fc').textContent = n;
      g('psub').textContent = sf ? `Stopped at ${n}` : `âœ… All ${count} videos playing!`;
      fs.scrollIntoView({behavior:'smooth', block:'start'});
      return;
    }
    // â† Each iframe gets its own unique session URL
    const src = uniqueEmbedSrc(vid, n);
    const d = document.createElement('div');
    d.className = 'fi';
    d.innerHTML = `<iframe src="${src}" frameborder="0" allowfullscreen
      allow="${allow}" referrerpolicy="no-referrer"
      loading="lazy"></iframe>
      <div class="fl"><span class="fd"></span>Screen #${n+1} Â· ğŸ†” Unique Session</div>`;
    fg.appendChild(d);
    n++;
    const pct = Math.round(n/count*100);
    g('pb2').style.width = pct + '%';
    g('pc2').textContent = n;
    g('pd').textContent = n + ' done';
    g('fc').textContent = n;
    g('psub').textContent = `Loading video ${n} of ${count} (unique session)...`;
  }, 200);
}

function doStop(){ sf=true; clearInterval(inlineTimer); g('lb').disabled=false; }
function clrF(){ g('fg').innerHTML=''; g('fr-sec').style.display='none'; }
</script>
</body>
</html>
